{% extends "base.html" %}
{% block content %}
<section class="hero">
    <div class="hero-text">
        <h1>{{ t['pricing']['hero']['title'] }}</h1>
        <p>{{ t['pricing']['hero']['subtitle'] }}</p>
        <div class="hero-actions">
            <a class="btn primary" href="/signup">{{ t['pricing']['hero']['primary_cta'] }}</a>
            <a class="btn secondary" href="/support">{{ t['pricing']['hero']['secondary_cta'] }}</a>
        </div>
    </div>
    <div class="hero-visual">
        <div class="dashboard-preview">
            <h3>{{ t['pricing']['hero']['visual_title'] }}</h3>
            <ul>
                {% for item in t['pricing']['hero']['visual_points'] %}
                <li>
                    <span class="platform">{{ item['label'] }}</span>
                    <span class="metric">{{ item['value'] }}</span>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</section>
<section class="pricing-switcher">
    <div class="pricing-toggle" role="tablist" aria-label="{{ t['pricing']['hero']['title'] }}">
        {% for group in t['pricing']['plan_groups'] %}
        <button type="button"
            class="pricing-toggle-button{% if loop.first %} active{% endif %}"
            data-plan-toggle="{{ loop.index0 }}"
            role="tab"
            id="plan-toggle-{{ loop.index0 }}"
            aria-selected="{{ 'true' if loop.first else 'false' }}"
            aria-controls="plan-group-{{ loop.index0 }}">
            {{ group['label'] }}
        </button>
        {% endfor %}
    </div>
</section>
<section class="pricing-categories">
    {% for group in t['pricing']['plan_groups'] %}
    <article id="plan-group-{{ loop.index0 }}" class="plan-category{% if loop.first %} is-active{% endif %}"
        data-plan-category="{{ loop.index0 }}" role="tabpanel"
        aria-labelledby="plan-toggle-{{ loop.index0 }}"
        aria-hidden="{{ 'false' if loop.first else 'true' }}">
        <div class="plan-category-header">
            <span class="plan-category-label">{{ group['label'] }}</span>
            <h2>{{ group['title'] }}</h2>
            <p>{{ group['description'] }}</p>
        </div>
        <div class="pricing-grid">
            {% for plan in group['plans'] %}
            <article class="pricing-card{% if plan['highlighted'] %} highlight{% endif %}">
                {% if plan.get('badge') %}
                <span class="plan-badge">{{ plan['badge'] }}</span>
                {% endif %}
                <div>
                    <h3>{{ plan['name'] }}</h3>
                    <p>{{ plan['description'] }}</p>
                </div>
                <div class="plan-price-row">
                    <span class="pricing-price">{{ plan['price'] }}</span>
                    <span class="pricing-cycle">{{ plan['cycle'] }}</span>
                </div>
                <ul class="pricing-features">
                    {% for feature in plan['features'] %}
                    <li>â€¢ {{ feature }}</li>
                    {% endfor %}
                </ul>
                <a class="btn {% if plan['highlighted'] %}primary{% else %}tertiary{% endif %}"
                    href="{{ plan.get('cta_link', '/signup') }}">{{ plan['cta'] }}</a>
            </article>
            {% endfor %}
        </div>
    </article>
    {% endfor %}
</section>
<section class="journey-steps">
    <div class="section-header">
        <h2>{{ t['pricing']['comparison']['title'] }}</h2>
        <p>{{ t['pricing']['comparison']['description'] }}</p>
    </div>
    {% for item in t['pricing']['comparison']['items'] %}
    <article class="journey-step">
        <span>{{ item['label'] }}</span>
        <h3>{{ item['title'] }}</h3>
        <p>{{ item['detail'] }}</p>
    </article>
    {% endfor %}
</section>
<section class="cta-banner">
    <div>
        <h2>{{ t['pricing']['cta']['title'] }}</h2>
        <p>{{ t['pricing']['cta']['description'] }}</p>
    </div>
    <div class="hero-actions">
        <a class="btn primary" href="/signup">{{ t['pricing']['cta']['primary'] }}</a>
        <a class="btn tertiary" href="/support">{{ t['pricing']['cta']['secondary'] }}</a>
    </div>
</section>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggleButtons = document.querySelectorAll('[data-plan-toggle]');
        const categories = document.querySelectorAll('[data-plan-category]');

        if (!toggleButtons.length || !categories.length) {
            return;
        }

        toggleButtons.forEach(function (button) {
            button.addEventListener('click', function () {
                const target = button.getAttribute('data-plan-toggle');

                toggleButtons.forEach(function (btn) {
                    const isActive = btn === button;
                    btn.classList.toggle('active', isActive);
                    btn.setAttribute('aria-selected', isActive ? 'true' : 'false');
                });

                categories.forEach(function (category) {
                    const isMatch = category.getAttribute('data-plan-category') === target;
                    category.classList.toggle('is-active', isMatch);
                    category.setAttribute('aria-hidden', isMatch ? 'false' : 'true');
                });
            });
        });
    });
</script>
{% endblock %}
