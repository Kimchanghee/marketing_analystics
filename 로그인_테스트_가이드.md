# 🔐 Creator Control Center - 로그인 테스트 가이드

## 📌 문제 해결 완료

### 발견된 문제
**ACCOUNTS_AND_PAGES.md** 파일에 잘못된 이메일 주소가 기록되어 있었습니다.

- ❌ **잘못된 정보**: `kckc93@creatorcontrol.center`
- ✅ **올바른 정보**: `kckc93@creatorscontrol.com`

### 수정 내용
1. ✅ ACCOUNTS_AND_PAGES.md 파일의 이메일 주소 수정 완료
2. ✅ 로그인 자동화 테스트 스크립트 생성 (`test_login_automation.py`)
3. ✅ 웹 기반 로그인 테스트 도구 생성 (`test_login_web.html`)

---

## 🚀 로그인 테스트 방법

### 방법 1: 웹 브라우저 테스트 (권장)

1. **`test_login_web.html` 파일을 브라우저로 열기**
   - 파일 탐색기에서 `test_login_web.html` 파일을 더블클릭
   - 또는 브라우저에서 직접 열기

2. **테스트 실행**
   - 개별 계정 테스트: 각 섹션의 "로그인 테스트" 버튼 클릭
   - 전체 테스트: "전체 계정 테스트 실행" 버튼 클릭

3. **결과 확인**
   - ✅ 성공: 녹색 배경으로 표시
   - ❌ 실패: 빨간색 배경으로 표시
   - 오류 메시지 및 상세 정보 표시

### 방법 2: Python 스크립트 테스트

```bash
# 데이터베이스 기반 로그인 테스트
python test_login_automation.py
```

**출력 정보:**
- 사용자 검색 결과
- 계정 상태 (활성화, 이메일 인증, 비밀번호 로그인 활성화)
- 비밀번호 검증 결과
- 로그인 성공/실패 상태
- JSON 결과 파일 생성 (`login_test_results.json`)

---

## 📋 올바른 로그인 정보

### 1️⃣ 마스터 관리자 (모든 페이지 접근 가능)

```
이메일: kckc93@creatorscontrol.com
비밀번호: Ckdgml9788@
역할: SUPER_ADMIN
```

**접속 방법:**
1. 로그인 페이지: https://marketing-analystics-573434207823.europe-west1.run.app/login
2. 이메일: `kckc93@creatorscontrol.com`
3. 비밀번호: `Ckdgml9788@`
4. 로그인 후 자동 리다이렉트: `/dashboard`

**접근 가능한 페이지:**
- ✅ 개인 대시보드: `/dashboard`
- ✅ 기업 대시보드: `/manager/dashboard`
- ✅ AI PD 대시보드: `/ai-pd`
- ✅ 슈퍼 관리자: `/super-admin?admin_token=YOUR_TOKEN`

---

### 2️⃣ 슈퍼 관리자

```
이메일: admin@test.com
비밀번호: password123
역할: SUPER_ADMIN
```

---

### 3️⃣ 기업 관리자

```
이메일: manager@test.com
비밀번호: password123
역할: MANAGER
```

**로그인 후 리다이렉트:** `/manager/dashboard`

---

### 4️⃣ 개인 크리에이터

```
이메일: creator@test.com
비밀번호: password123
역할: CREATOR
```

**로그인 후 리다이렉트:** `/dashboard`

---

## 🔍 로그인 실패 시 확인사항

### 1. 이메일 주소 확인
```
❌ 잘못된 예: kckc93@creatorcontrol.center
✅ 올바른 예: kckc93@creatorscontrol.com
```

**차이점:**
- `creatorcontrol` (s 없음) ❌
- `creatorscontrol` (s 있음) ✅

### 2. 비밀번호 확인
- 대소문자 구분
- 특수문자 정확히 입력
- 공백 없이 입력

### 3. 계정 상태 확인
- 계정 활성화 상태
- 이메일 인증 완료 여부
- 비밀번호 로그인 활성화 여부

### 4. 서버 상태 확인
```bash
# 프로덕션 서버
https://marketing-analystics-573434207823.europe-west1.run.app

# 로컬 서버 (개발용)
http://127.0.0.1:8000
```

---

## 🛠️ 추가 테스트 도구

### 1. 데이터베이스 직접 확인

```python
# quick_check_db.py
from app.database import engine
from app.models import User
from sqlmodel import Session, select

with Session(engine) as session:
    user = session.exec(
        select(User).where(User.email == "kckc93@creatorscontrol.com")
    ).first()
    
    if user:
        print(f"✅ 사용자 발견")
        print(f"   이메일: {user.email}")
        print(f"   이름: {user.name}")
        print(f"   역할: {user.role}")
        print(f"   활성: {user.is_active}")
    else:
        print("❌ 사용자를 찾을 수 없습니다")
```

### 2. API 직접 테스트 (curl)

```bash
# Windows PowerShell
Invoke-WebRequest -Uri "https://marketing-analystics-573434207823.europe-west1.run.app/auth/login" `
  -Method POST `
  -ContentType "application/x-www-form-urlencoded" `
  -Body "username=kckc93@creatorscontrol.com&password=Ckdgml9788@"

# Linux/Mac
curl -X POST "https://marketing-analystics-573434207823.europe-west1.run.app/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=kckc93@creatorscontrol.com&password=Ckdgml9788@"
```

### 3. Postman/Insomnia 테스트

**요청 설정:**
- URL: `https://marketing-analystics-573434207823.europe-west1.run.app/auth/login`
- Method: `POST`
- Content-Type: `application/x-www-form-urlencoded`
- Body:
  - `username`: `kckc93@creatorscontrol.com`
  - `password`: `Ckdgml9788@`

---

## 📧 Gmail SMTP 테스트 (슈퍼 관리자 메일)

로그인 성공 후 Gmail SMTP 테스트를 진행하려면:

```bash
# 이메일 발송 테스트
python send_test_email.py
```

**필수 환경 변수:**
```bash
SUPER_ADMIN_EMAIL=your_email@gmail.com
SUPER_ADMIN_EMAIL_PASSWORD=your_app_password
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
```

**Gmail 설정:**
1. Google 계정에서 2단계 인증 활성화
2. 앱 비밀번호 생성
3. 생성된 앱 비밀번호를 `SUPER_ADMIN_EMAIL_PASSWORD`에 설정

---

## 🎯 다음 단계

### 로그인 성공 후:

1. **개인 대시보드 접근**
   - URL: `/dashboard`
   - 채널 관리, 성과 분석, AI PD 비서

2. **기업 대시보드 접근**
   - URL: `/manager/dashboard`
   - 크리에이터 관리, 통합 성과 분석

3. **슈퍼 관리자 페이지 접근**
   - URL: `/super-admin?admin_token=YOUR_TOKEN`
   - 회원 관리, 구독 관리, 결제 관리
   - 환경 변수 `SUPER_ADMIN_ACCESS_TOKEN` 필요

4. **Gmail SMTP 테스트**
   - 슈퍼 관리자 이메일 발송 테스트
   - 환경 변수 설정 후 `send_test_email.py` 실행

---

## 📞 문제 발생 시

### 로그인 실패 오류 메시지

| 오류 메시지 | 원인 | 해결 방법 |
|-----------|------|----------|
| "이메일 또는 비밀번호가 일치하지 않습니다." | 잘못된 이메일 또는 비밀번호 | 이메일 주소 확인 (`creatorscontrol.com`인지 확인) |
| "계정이 비활성화되었습니다." | 계정 비활성화 상태 | 데이터베이스에서 `is_active` 확인 |
| "비밀번호 로그인이 비활성화되었습니다." | 소셜 로그인 전용 계정 | 데이터베이스에서 `password_login_enabled` 확인 |
| "연결 오류" | 서버 다운 또는 네트워크 문제 | 서버 상태 확인 |

### 추가 도움

1. **데이터베이스 확인**: `quick_check_db.py` 실행
2. **웹 테스트 도구**: `test_login_web.html` 브라우저로 열기
3. **Python 테스트**: `test_login_automation.py` 실행
4. **로그 확인**: 서버 로그 또는 브라우저 콘솔 확인

---

## ✅ 체크리스트

로그인 전 확인사항:

- [ ] 이메일 주소 정확히 입력 (`kckc93@creatorscontrol.com`)
- [ ] 비밀번호 정확히 입력 (`Ckdgml9788@`)
- [ ] 서버가 실행 중인지 확인
- [ ] 인터넷 연결 확인
- [ ] 브라우저 쿠키/캐시 삭제 (필요시)

로그인 후 확인사항:

- [ ] 대시보드 접근 가능
- [ ] JWT 토큰 발급 확인
- [ ] 사용자 정보 표시 확인
- [ ] 권한에 따른 페이지 접근 가능 확인

---

**작성일:** 2025-11-04  
**버전:** 1.0  
**상태:** ✅ 문제 해결 완료




